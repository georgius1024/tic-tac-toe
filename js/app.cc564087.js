(function(e){function t(t){for(var i,a,o=t[0],u=t[1],c=t[2],h=0,d=[];h<o.length;h++)a=o[h],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(i=!1)}i&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},r={app:0},s=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/tic-tac-toe/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("85ec"),r=n.n(i);r.a},"25c8":function(e,t,n){"use strict";var i=n("57d7"),r=n.n(i);r.a},"4fcd":function(e,t,n){},5264:function(e,t,n){"use strict";var i=n("9de6"),r=n.n(i);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("div",{staticClass:"side-panel"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.humanPlayer===e.currentPlayer&&-1!==e.currentPlayer,expression:"humanPlayer === currentPlayer && currentPlayer !== -1"}],domProps:{textContent:e._s("Make your turn")}})]),n("Board",{attrs:{value:e.history,disabled:e.finished,strike:e.strike},on:{input:e.input,reset:e.resetGame}}),n("div",{staticClass:"side-panel"},[n("button",{directives:[{name:"show",rawName:"v-show",value:-1!==e.currentPlayer,expression:"currentPlayer !== -1"}],staticClass:"reset-button",on:{click:e.resetGame}},[e._v("Restart")])]),n("Setup",{ref:"setup",on:{input:e.startGame}}),n("Report",{ref:"report",on:{input:e.resetGame}})],1)},s=[],a=(n("7db0"),n("2315"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"board"},e._l(e.cells,(function(t,i){return n("div",{key:i,staticClass:"row"},e._l(t,(function(t,i){return n("Cell",{key:i,attrs:{index:t.index,owned:t.owned,highlight:t.highlight,disabled:e.disabled},on:{input:e.input,reset:e.reset}})})),1)})),0)}),o=[],u=(n("c975"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{cell:!0,disabled:e.disabled,highlight:e.highlight},on:{click:e.click}},[n("transition-group",{attrs:{name:"fade"}},[0===e.owned?n("span",{key:0,domProps:{textContent:e._s("X")}}):e._e(),1===e.owned?n("span",{key:1,domProps:{textContent:e._s("O")}}):e._e()])],1)}),c=[],l=(n("a9e3"),{name:"Cell",props:{index:{type:Number,required:!0},owned:{type:Number,required:!0},disabled:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1}},methods:{click:function(){this.disabled?this.$emit("reset"):-1===this.owned&&this.$emit("input",this.index)}}}),h=l,d=(n("5264"),n("2877")),f=Object(d["a"])(h,u,c,!1,null,"0556d849",null),p=f.exports,v={name:"Board",components:{Cell:p},props:{value:{type:String,required:!0},disabled:{type:Boolean,default:!1},strike:{type:Array,required:!0}},computed:{cells:function(){for(var e=[[],[],[]],t=0;t<9;t++){var n=this.value.indexOf(t),i={index:t,owned:-1===n?n:n%2,highlight:-1!==this.strike.indexOf(t)};e[Math.floor(t/3)].push(i)}return e}},methods:{input:function(e){this.$emit("input",this.value+e)},reset:function(){this.$emit("reset")}}},y=v,m=(n("7b91"),Object(d["a"])(y,a,o,!1,null,"28a09d2c",null)),w=m.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"wrapper",on:{click:e.hide}},[n("transition",{attrs:{name:"slide"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"report"},[n("div",{staticClass:"close",attrs:{href:"#"},on:{click:e.hide}},[e._v("Ã—")]),n("div",{staticClass:"message"},[e._v(e._s(e.message))]),n("p",{staticClass:"cta"},[e._v("Click to restart game")])])])],1)},g=[],k={name:"Report",data:function(){return{message:"",visible:!1}},mounted:function(){document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)},methods:{show:function(e){this.message=e,this.visible=!0},hide:function(){this.visible=!1,this.$emit("input")},keydown:function(e){"Escape"===e.code&&this.visible&&this.hide()}}},P=k,x=(n("25c8"),Object(d["a"])(P,b,g,!1,null,"2b38c0ec",null)),_=x.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"wrapper"},[n("transition",{attrs:{name:"slide-up"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"modal"},[n("div",{staticClass:"header"},[e._v("Choose your side")]),n("div",{staticClass:"body"},[n("button",{on:{click:function(t){return e.close(0)}}},[e._v("X")]),n("button",{on:{click:function(t){return e.close(1)}}},[e._v("O")])])])])],1)},C=[],j={name:"Setup",data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},close:function(e){this.visible=!1,this.$emit("input",e)}}},$=j,S=(n("5dbe"),Object(d["a"])($,O,C,!1,null,"12e127bb",null)),E=S.exports,G=(n("4de4"),n("4160"),n("caad"),n("2532"),n("159b"),n("d4ec")),N=n("bee2"),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(G["a"])(this,e),this.history=t}return Object(N["a"])(e,[{key:"turn",value:function(e){if(e<0||e>8)throw new RangeError("Cell is number between 0 and 8");this.history+=e}},{key:"currentPlayer",value:function(){return this.history.length%2}},{key:"analyze",value:function(){var e=this,t={finished:9===this.history.length,winner:-1,strike:[],winning:[[],[]],perspective:[[],[]]},n=function(t){var n=e.history.indexOf(t);return-1!==n?n%2:n};function i(e,i,r){var s={},a=[n(e),n(i),n(r)];a.forEach((function(e){s[e]=s[e]?s[e]+1:1}));for(var o=0;o<=1;o++){var u=1-o;if(3===s[o])throw t.winner=o,t.strike=[+e,+i,+r],t.finished=!0,t;if(2!==s[o]||s[u]){if(1===s[o]&&!s[u]){var c=+[e,i,r][a.indexOf(-1)];t.perspective[o].push(c)}}else{var l=+[e,i,r][a.indexOf(-1)];t.winning[o].push(l)}}}try{i("0","1","2"),i("3","4","5"),i("6","7","8"),i("0","3","6"),i("1","4","7"),i("2","5","8"),i("0","4","8"),i("2","4","6")}catch(r){if(r instanceof Error)throw r;return t}return t}},{key:"nextTurn",value:function(e){var t=this.searchHistory(e);if(-1!==t)return t;var n=[0,2,6,8];return 0===this.history.length?4:1===this.history.length?"4"===this.history[0]?M(n):4:this.calculateTurn()}},{key:"calculateTurn",value:function(){var e=this.currentPlayer(),t=1-e,n=this.analyze();return-1!==n.winner||9===this.history.length?-1:n.winning[e].length?M(n.winning[e]):n.winning[t].length?M(n.winning[t]):n.perspective[e].length?M(n.perspective[e]):n.perspective[t].length?M(n.perspective[t]):this.randomTurn()}},{key:"randomTurn",value:function(){for(var e=[],t=0;t<9;t++)this.history.includes(t)||e.push(t);return M(e)}},{key:"searchHistory",value:function(e){var t=this;if(!Array.isArray(e)||!e.length||!this.history.length)return-1;var n=this.currentPlayer(),i=e.filter((function(e){return 0===e.history.indexOf(t.history)})).filter((function(e){return e.winner===n}));return i.length?+i[0].history[this.history.length]:-1}}]),e}();function M(e){return e[Math.floor(Math.random()*e.length)]}var z=T,B="games-played",R={name:"App",data:function(){return{history:"",humanPlayer:0,finished:!1,currentPlayer:-1,winner:-1,strike:[],gamesPlayed:[]}},created:function(){this.game=new z,this.gamesPlayed=JSON.parse(localStorage.getItem(B)||"[]")},mounted:function(){this.setupGame()},methods:{setupGame:function(){this.$refs.setup.show&&this.$refs.setup.show()},startGame:function(e){this.humanPlayer=e,this.history="",this.analyze(),this.act()},resetGame:function(){this.history="",this.analyze(),this.currentPlayer=-1,this.setupGame()},stopGame:function(){var e=this;this.gamesPlayed.find((function(t){return t.history===e.history}))||(this.gamesPlayed.push({history:this.history,winner:this.winner}),localStorage.setItem(B,JSON.stringify(this.gamesPlayed))),this.$refs.report.show&&this.$refs.report.show(this.report())},report:function(){return(this.winner===this.humanPlayer?"You wins":-1===this.winner&&"No one wins")||this.winner!==this.humanPlayer&&"Computer wins"},analyze:function(){this.game.history=this.history;var e=this.game.analyze();this.finished=e.finished,this.winner=e.winner,this.strike=e.strike,this.currentPlayer=this.game.currentPlayer()},act:function(){var e=this;this.currentPlayer!==this.humanPlayer&&setTimeout((function(){e.input(e.history+e.game.nextTurn(e.gamesPlayed))}),300)},input:function(e){this.history=e,this.analyze(),this.finished?this.stopGame():this.act()}},components:{Setup:E,Board:w,Report:_}},q=R,A=(n("034f"),n("d344"),Object(d["a"])(q,r,s,!1,null,"cbe4bf8e",null)),J=A.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(J)}}).$mount("#app")},"57d7":function(e,t,n){},"5dbe":function(e,t,n){"use strict";var i=n("73ec"),r=n.n(i);r.a},"73ec":function(e,t,n){},"7b91":function(e,t,n){"use strict";var i=n("9774"),r=n.n(i);r.a},"85ec":function(e,t,n){},9774:function(e,t,n){},"9de6":function(e,t,n){},d344:function(e,t,n){"use strict";var i=n("4fcd"),r=n.n(i);r.a}});
//# sourceMappingURL=app.cc564087.js.map