(function(e){function t(t){for(var n,a,o=t[0],u=t[1],h=t[2],c=0,d=[];c<o.length;c++)a=o[c],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,h||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],n=!0,o=1;o<i.length;o++){var u=i[o];0!==r[u]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},r={app:0},s=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/tic-tac-toe/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var h=0;h<o.length;h++)t(o[h]);var l=u;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var n=i("85ec"),r=i.n(n);r.a},"41db":function(e,t,i){"use strict";var n=i("bb0b"),r=i.n(n);r.a},"452c":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",[i("div",{staticClass:"side-panel"},[i("span",{directives:[{name:"show",rawName:"v-show",value:e.humanPlayer===e.currentPlayer,expression:"humanPlayer === currentPlayer"}],domProps:{textContent:e._s("Make your turn")}})]),i("Board",{attrs:{value:e.history,disabled:e.finished,strike:e.strike},on:{input:e.input,reset:e.resetGame}}),i("div",{staticClass:"side-panel"},[i("button",{directives:[{name:"show",rawName:"v-show",value:-1!==e.humanPlayer&&!e.finished,expression:"humanPlayer !== -1 && !finished"}],staticClass:"reset-button",on:{click:e.resetGame}},[e._v("Restart")])]),i("Setup",{ref:"setup",on:{input:e.startGame}}),i("Report",{ref:"report",on:{input:e.resetGame}})],1)},s=[],a=(i("7db0"),i("2315"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"board"},e._l(e.cells,(function(t,n){return i("div",{key:n,staticClass:"row"},e._l(t,(function(t,n){return i("Cell",{key:n,attrs:{index:t.index,owned:t.owned,highlight:t.highlight,disabled:e.disabled},on:{input:e.input,reset:e.reset}})})),1)})),0)}),o=[],u=(i("c975"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{cell:!0,disabled:e.disabled,highlight:e.highlight},on:{click:e.click}},[i("transition-group",{attrs:{name:"fade"}},[0===e.owned?i("span",{key:0,domProps:{textContent:e._s("X")}}):e._e(),1===e.owned?i("span",{key:1,domProps:{textContent:e._s("O")}}):e._e()])],1)}),h=[],l=(i("a9e3"),{name:"Cell",props:{index:{type:Number,required:!0},owned:{type:Number,required:!0},disabled:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1}},methods:{click:function(){this.disabled?this.$emit("reset"):-1===this.owned&&this.$emit("input",this.index)}}}),c=l,d=(i("6df0"),i("2877")),f=Object(d["a"])(c,u,h,!1,null,"76dab11a",null),p=f.exports,y={name:"Board",components:{Cell:p},props:{value:{type:String,required:!0},disabled:{type:Boolean,default:!1},strike:{type:Array,required:!0}},computed:{cells:function(){for(var e=[[],[],[]],t=0;t<9;t++){var i=this.value.indexOf(t),n={index:t,owned:-1===i?i:i%2,highlight:-1!==this.strike.indexOf(t)};e[Math.floor(t/3)].push(n)}return e}},methods:{input:function(e){this.$emit("input",this.value+e)},reset:function(){this.$emit("reset")}}},v=y,m=(i("41db"),Object(d["a"])(v,a,o,!1,null,"26c77327",null)),w=m.exports,b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"wrapper",on:{click:e.hide}},[i("transition",{attrs:{name:"slide"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"report"},[i("div",{staticClass:"close",attrs:{href:"#"},on:{click:e.hide}},[e._v("Ã—")]),i("div",{staticClass:"message"},[e._v(e._s(e.message))]),i("p",{staticClass:"cta"},[e._v("Restart game")])])])],1)},g=[],k={name:"Report",data:function(){return{message:"",visible:!1}},mounted:function(){document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)},methods:{show:function(e){this.message=e,this.visible=!0},hide:function(){this.visible=!1,this.$emit("input")},keydown:function(e){"Escape"===e.code&&this.visible&&this.hide()}}},P=k,x=(i("9610"),Object(d["a"])(P,b,g,!1,null,"5eeaa7b1",null)),_=x.exports,O=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"wrapper"},[i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"modal"},[i("div",{staticClass:"header"},[e._v("Choose your side")]),i("div",{staticClass:"body"},[i("button",{on:{click:function(t){return e.close(0)}}},[e._v("X")]),i("button",{on:{click:function(t){return e.close(1)}}},[e._v("O")])])])])],1)},C=[],j={name:"Setup",data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},close:function(e){this.visible=!1,this.$emit("input",e)}}},$=j,z=(i("935e"),Object(d["a"])($,O,C,!1,null,"26ca8564",null)),S=z.exports,E=(i("4de4"),i("4160"),i("caad"),i("4ec9"),i("d3b7"),i("2532"),i("3ca3"),i("159b"),i("ddb0"),i("d4ec")),G=i("bee2"),N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(E["a"])(this,e),this.history=t}return Object(G["a"])(e,[{key:"turn",value:function(e){if(e<0||e>8)throw new RangeError("Cell is number between 0 and 8");this.history+=e}},{key:"currentPlayer",value:function(){return this.history.length%2}},{key:"analyze",value:function(){var e=this;if(this.analyzeHistory){if(this.analyzeHistory.has(this.history))return this.analyzeHistory.get(this.history)}else this.analyzeHistory=new Map;var t={finished:9===this.history.length,winner:-1,strike:[],winning:[[],[]],perspective:[[],[]]},i=function(t){var i=e.history.indexOf(t);return-1!==i?i%2:i};function n(e,n,r){var s={},a=[i(e),i(n),i(r)];a.forEach((function(e){s[e]=s[e]?s[e]+1:1}));for(var o=0;o<=1;o++){var u=1-o;if(3===s[o])throw t.winner=o,t.strike=[+e,+n,+r],t.finished=!0,t;if(2!==s[o]||s[u]){if(1===s[o]&&!s[u]){var h=+[e,n,r][a.indexOf(-1)];t.perspective[o].push(h)}}else{var l=+[e,n,r][a.indexOf(-1)];t.winning[o].push(l)}}}try{n("0","1","2"),n("3","4","5"),n("6","7","8"),n("0","3","6"),n("1","4","7"),n("2","5","8"),n("0","4","8"),n("2","4","6")}catch(r){if(r instanceof Error)throw r;return this.analyzeHistory.set(this.history,t),t}return this.analyzeHistory.set(this.history,t),t}},{key:"nextTurn",value:function(e){var t=this.searchHistory(e);if(-1!==t)return t;var i=[0,2,6,8];return 0===this.history.length?4:1===this.history.length?"4"===this.history[0]?T(i):4:this.calculateTurn()}},{key:"calculateTurn",value:function(){var e=this.currentPlayer(),t=1-e,i=this.analyze();return-1!==i.winner||9===this.history.length?-1:i.winning[e].length?T(i.winning[e]):i.winning[t].length?T(i.winning[t]):i.perspective[e].length?T(i.perspective[e]):i.perspective[t].length?T(i.perspective[t]):this.randomTurn()}},{key:"randomTurn",value:function(){for(var e=[],t=0;t<9;t++)this.history.includes(t)||e.push(t);return T(e)}},{key:"searchHistory",value:function(e){var t=this;if(!Array.isArray(e)||!e.length||!this.history.length)return-1;var i=this.currentPlayer(),n=e.filter((function(e){return 0===e.history.indexOf(t.history)})).filter((function(e){return e.winner===i}));return n.length?+n[0].history[this.history.length]:-1}}]),e}();function T(e){return e[Math.floor(Math.random()*e.length)]}var M=N,H="games-played",B={name:"App",data:function(){return{history:"",humanPlayer:0,finished:!1,currentPlayer:-1,winner:-1,strike:[],gamesPlayed:[]}},created:function(){this.game=new M,this.gamesPlayed=JSON.parse(localStorage.getItem(H)||"[]")},mounted:function(){this.resetGame()},methods:{initializeGame:function(){this.history="",this.game.history="",this.finished=!1,this.winner=-1,this.strike=[],this.currentPlayer=0,this.humanPlayer=-1},startGame:function(e){this.humanPlayer=e,this.act()},resetGame:function(){this.initializeGame(),this.$refs.setup.show&&this.$refs.setup.show()},stopGame:function(){var e=this;this.gamesPlayed.find((function(t){return t.history===e.history}))||(this.gamesPlayed.push({history:this.history,winner:this.winner}),localStorage.setItem(H,JSON.stringify(this.gamesPlayed))),this.$refs.report.show&&this.$refs.report.show(this.report())},report:function(){return(this.winner===this.humanPlayer?"You wins":-1===this.winner&&"No one wins")||this.winner!==this.humanPlayer&&"Computer wins"},analyze:function(){this.game.history=this.history;var e=this.game.analyze();this.finished=e.finished,this.winner=e.winner,this.strike=e.strike,this.currentPlayer=this.game.currentPlayer()},act:function(){var e=this;this.currentPlayer!==this.humanPlayer&&setTimeout((function(){e.input(e.history+e.game.nextTurn(e.gamesPlayed))}),300)},input:function(e){this.history=e,this.analyze(),this.finished?this.stopGame():this.act()}},components:{Setup:S,Board:w,Report:_}},R=B,q=(i("034f"),i("b0a0"),Object(d["a"])(R,r,s,!1,null,null,null)),A=q.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(A)}}).$mount("#app")},"6df0":function(e,t,i){"use strict";var n=i("ac0c"),r=i.n(n);r.a},"85ec":function(e,t,i){},"935e":function(e,t,i){"use strict";var n=i("c929"),r=i.n(n);r.a},9610:function(e,t,i){"use strict";var n=i("a3fa"),r=i.n(n);r.a},a3fa:function(e,t,i){},ac0c:function(e,t,i){},b0a0:function(e,t,i){"use strict";var n=i("452c"),r=i.n(n);r.a},bb0b:function(e,t,i){},c929:function(e,t,i){}});
//# sourceMappingURL=app.7e23ccbf.js.map